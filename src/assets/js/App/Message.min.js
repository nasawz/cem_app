/*!
 * remark (http://getbootstrapadmin.com/remark)
 * Copyright 2016 amazingsurge
 * Licensed under the Themeforest Standard Licenses
 */
!function(t,e){if("function"==typeof define&&define.amd)define("/App/Message",["exports","Site"],e);else if("undefined"!=typeof exports)e(exports,require("Site"));else{var s={exports:{}};e(s.exports,t.Site),t.AppMessage=s.exports}}(this,function(t,e){"use strict";function s(){return n||(n=new o),n}function a(){var t=s();t.run()}Object.defineProperty(t,"__esModule",{value:!0}),t.getInstance=t.run=t.AppMessage=void 0;var i=babelHelpers.interopRequireDefault(e),r=function(){function t(e){var s=this;babelHelpers.classCallCheck(this,t),this.$el=e,this.$historyBtn=$("#historyBtn"),this.scrollChatsToBottom(),$(window).on("resize",function(){s.scrollChatsToBottom()})}return babelHelpers.createClass(t,[{key:"scrollChatsToBottom",value:function(){var t=this.$el,e=t.height(),s=$(".chats",t).outerHeight(),a=this.$historyBtn.outerHeight();t.scrollTop(s+a-e)}}]),t}(),o=function(t){function e(){return babelHelpers.classCallCheck(this,e),babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"processed",value:function(){babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"processed",this).call(this),this.newChatLists=[],this.$chatsWrap=$(".app-message-chats"),this.chatApi=new r(this.$chatsWrap),this.$textArea=$(".message-input textarea"),this.$textareaWrap=$(".app-message-input"),this.$msgEdit=$(".message-input>.form-control"),this.$sendBtn=$(".message-input-btn"),this.steupMessage(),this.setupTextarea()}},{key:"getDefaultState",value:function(){return Object.assign(babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultState",this).call(this),{chatListsLength:0})}},{key:"getDefaultActions",value:function(){return Object.assign(babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDefaultActions",this).call(this),{chatListsLength:function(t){if(this.newChatLists[t-1]){var e=$("<div class='chat-content'><p>"+this.newChatLists[t-1]+"</p></div>");$(".chat").last().find(".chat-body").append(e),this.$msgEdit.attr("placeholder",""),this.$msgEdit.val("")}else this.$msgEdit.attr("placeholder","type text here...");this.chatApi.scrollChatsToBottom()}})}},{key:"setupTextarea",value:function(){var t=this;autosize($(".message-input textarea")),this.$textArea.on("autosize:resized",function(){t.$chatsWrap.css("height","calc(100% - "+t.$textareaWrap.outerHeight()+"px)"),t.triggerResize()})}},{key:"steupMessage",value:function(){var t=this;this.$sendBtn.on("click",function(){var e=t.getState("chatListsLength");t.newChatLists.push(t.getMsg()),t.setState("chatListsLength",++e)})}},{key:"getMsg",value:function(){return this.$msgEdit.val()}}]),e}(i.default),n=null;t.default=o,t.AppMessage=o,t.run=a,t.getInstance=s});