/*!
 * remark (http://getbootstrapadmin.com/remark)
 * Copyright 2016 amazingsurge
 * Licensed under the Themeforest Standard Licenses
 */
!function(t,e){if("function"==typeof define&&define.amd)define("/App/Taskboard",["exports","Site"],e);else if("undefined"!=typeof exports)e(exports,require("Site"));else{var a={exports:{}};e(a.exports,t.Site),t.AppTaskboard=a.exports}}(this,function(t,e){"use strict";function a(){return w||(w=new y),w}function s(){var t=a();t.run()}Object.defineProperty(t,"__esModule",{value:!0}),t.getInstance=t.run=t.AppTaskboard=void 0;var n=babelHelpers.interopRequireDefault(e),i=function(){var t={status:!1,title:"",description:"",priority:"normal",duedate:"",members:[],subtasks:[],attachments:[],comments:[]};return t},l=function(){function t(e,a){babelHelpers.classCallCheck(this,t),this.$el=e,this.data=a,this.render(),this.$el.sortable({handle:".taskboard-stage-header"})}return babelHelpers.createClass(t,[{key:"add",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t instanceof o?this.$el.append(t.$el):this.add(this.createStage(t))}},{key:"createStage",value:function(t){return new o(t)}},{key:"render",value:function(){for(var t=this.data.length,e=0;e<t;e++){var a=this.createStage(this.data[e]);this.add(a)}}}]),t}(),o=function(){function t(e){babelHelpers.classCallCheck(this,t),this.data=e,this.$el=null,this.$taskList=null,this.taskList=null,this.render(),this.$stageDropdownArrow=$('.taskboard-stage-actions a[data-toggle="dropdown"]',this.$el),this.bindStageDropdownArrow(),this.$renameBtn=$(".taskboard-stage-rename",this.$el),this.bindRenameBtn(),this.$renameSaveBtn=$(".taskboard-stage-rename-save",this.$el),this.bindRenameSaveBtn(),this.$deleteBtn=$(".taskboard-stage-delete",this.$el),this.bindDeleteBtn()}return babelHelpers.createClass(t,[{key:"render",value:function(){this.$el=$(this.getTpl(this.data.title)),this.$taskList=this.$el.find(".taskboard-list");var t=this.data.tasks;this.taskList=new d(this.$taskList,t)}},{key:"getTpl",value:function(t){return'\n            <li class="taskboard-stage">\n              <header class="taskboard-stage-header">\n                <div class="taskboard-stage-actions pull-xs-right">\n                  <div class="dropdown">\n                    <a data-toggle="dropdown" href="#" aria-expanded="false"><i class="icon wb-chevron-down" aria-hidden="true"></i></a>\n                    <div class="dropdown-menu bullet" role="menu">\n                      <a class="taskboard-stage-rename dropdown-item" href="javascript:void(0)" role="menuitem"><i class="icon wb-pencil" aria-hidden="true"></i>Rename</a>\n                      <a class="taskboard-stage-delete dropdown-item" href="javascript:void(0)" role="menuitem"><i class="icon wb-trash" aria-hidden="true"></i>Delete</a>\n                        <div class="taskboard-stage-rename-wrap">\n                          <div class="form-group">\n                            <input class="form-control taskboard-stage-rename-input" type="text" value="'+t+'" name="name">\n                          </div>\n                          <button class="btn btn-primary btn-block taskboard-stage-rename-save" type="button">Save</button>\n                        </div>\n                    </div>\n                  </div>\n                </div>\n                <h5 class="taskboard-stage-title">'+t+'</h5>\n              </header>\n              <div class="taskboard-stage-content">\n                <ul class="list-group taskboard-list"></ul>\n                <div class="action-wrap">\n                  <a class="add-item-toggle" href="#"><i class="icon wb-plus" aria-hidden="true"></i>Add Task</a>\n                    <div class="add-item-wrap">\n                      <form class="add-item" role="form" method="post" action="#">\n                        <div class="form-group">\n                          <label class="form-control-label m-b-15" for="name">Task name:</label>\n                          <input class="form-control" type="text" placeholder="Task name" name="name">\n                        </div>\n                        <div class="form-group text-xs-right">\n                          <a class="btn btn-sm btn-white add-item-cancel">Cancel</a>\n                          <button type="button" class="btn btn-primary add-item-add">Add</button>\n                        </div>\n                      </form>\n                    </div>\n                </div>\n              </div>\n            </li>\n           '}},{key:"bindStageDropdownArrow",value:function(){this.$stageDropdownArrow.on("click",function(){$(this).next(".dropdown-menu").removeClass("is-edit")})}},{key:"bindRenameBtn",value:function(){this.$renameBtn.on("click",function(t){var e=$(this).closest(".taskboard-stage-header"),a=$(this).closest(".dropdown-menu"),s=$(".taskboard-stage-rename-input",a),n=$(".taskboard-stage-title",e);a.toggleClass("is-edit"),s.val("").focus().val(n.html()),t.stopPropagation()})}},{key:"bindRenameSaveBtn",value:function(){this.$renameSaveBtn.on("click",function(){var t=$(this).closest(".taskboard-stage-header"),e=$(".taskboard-stage-rename-input",t),a=$(".taskboard-stage-title",t),s=e.val();0!==s.length&&a.html(s)})}},{key:"bindDeleteBtn",value:function(){this.$deleteBtn.on("click",function(){var t=$(this);bootbox.dialog({message:"Do you want to delete the stage?",buttons:{success:{label:"Delete",className:"btn-danger",callback:function(){t.closest(".taskboard-stage").remove()}}}})})}}]),t}(),d=function(){function t(e,a){babelHelpers.classCallCheck(this,t),this.$el=e,this.data=a,this.render(),this.$el.sortable({connectWith:".taskboard-stage .list-group"}),this.$wrap=this.$el.parent().find(".action-wrap"),this.$addItemToggle=this.$wrap.find(".add-item-toggle"),this.bindAddItemToggle(),this.$addItemBtn=this.$wrap.find(".add-item-add"),this.bindAddItemBtn(),this.$cancelBtn=this.$wrap.find(".add-item-cancel"),this.bindCancelBtn(),this.bindTaskInput(),this.handleOpenSlidePanel()}return babelHelpers.createClass(t,[{key:"add",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t instanceof h)this.$el.append(t.$el);else{var e=this.createTask(t);e.$el.data("taskInfo",t),this.add(e)}}},{key:"createTask",value:function(t){return new h(t)}},{key:"render",value:function(){var t=this.data.length;if(0!==t)for(var e=0;e<t;e++){var a=this.createTask(this.data[e]);a.$el.data("taskInfo",this.data[e]),this.add(a)}}},{key:"bindAddItemToggle",value:function(){var t=this;this.$addItemToggle.on("click",function(){var e=$('[name="name"]',t.$wrap);t.$wrap.toggleClass("action-open"),e.val("")}),this.$wrap.on("click.add-item",".form-control-label",function(e){t.$wrap.removeClass("action-open"),t.$el.off("click.add-item")})}},{key:"bindAddItemBtn",value:function(){var t=this;this.$addItemBtn.on("click",function(){var e=$('[name="name"]',t.$wrap),a=i();0!==e.val().length&&(a.title=e.val(),t.add(a)),t.$wrap.toggleClass("action-open")})}},{key:"bindCancelBtn",value:function(){var t=this;this.$cancelBtn.on("click",function(){t.$wrap.toggleClass("action-open")})}},{key:"bindTaskInput",value:function(){this.$el.on("click",".checkbox-custom input",function(t){var e=$(this),a=e.closest(".list-group-item"),s=a.data("taskInfo");s.complete=e.prop("checked"),a.data("taskInfo",s),t.stopPropagation()})}},{key:"openSlidePanel",value:function(t,e){"undefined"!=typeof $.slidePanel&&u.show(t,e)}},{key:"handleOpenSlidePanel",value:function(){var t=this,e=$.extend({},u.defaults,u.defaultsOptions);this.$el.on("click",'[data-taskboard="slidePanel"]',function(a){var s=$(a.target).closest(".list-group-item"),n={url:$(this).data("url"),target:s};t.openSlidePanel(n,e),a.stopPropagation()})}}]),t}(),r=Plugin.getDefaults("slidePanel"),c={template:function(t){return'\n          <div class="'+t.classes.base+"  "+t.classes.base+"-"+t.direction+'">\n            <div class="'+t.classes.base+'-scrollable"><div>\n            <div class="'+t.classes.content+'"></div>\n            </div></div>\n            <div class="'+t.classes.base+'-handler"></div>\n          </div>\n          '},afterLoad:function(t){var e=this,a=$(t.target),s=a.data("taskInfo");this.$panel.find("."+this.options.classes.base+"-scrollable").asScrollable({namespace:"scrollable",contentSelector:">",containerSelector:">"}),this.$panel.find("#task-description").markdown(),"undefined"!=typeof s&&s.duedate.length>0&&this.$panel.find("#taskDatepicker").data("date",s.duedate),this.$panel.find("#taskDatepicker").datepicker({autoclose:!1,todayHighlight:!0}).on("changeDate",function(){$("#taskDatepickerInput").val(e.$panel.find("#taskDatepicker").datepicker("getFormattedDate"))}),this.$panel.data("slidePanel",t),$(document).off("click.slidePanelDatepicker"),$(document).on("click.slidePanelDatepicker","span, td, th",function(t){t.stopPropagation()})},afterShow:function(){var t=this;$(document).on("click.slidePanelShow",function(e){0===$(e.target).closest(".slidePanel").length&&1===$(e.target).closest("body").length&&t.hide()})},afterHide:function(){$(document).off("click.slidePanelShow"),$(document).off("click.slidePanelDatepicker")},contentFilter:function(t,e){var a=void 0,s=$(t),n=$(e.target),i=n.data("taskInfo"),l=n.closest(".taskboard-stage");switch($(".stage-name",s).html($(".taskboard-stage-title",l.html())),$(".task-title",s).html(i.title),i.priority){case"high":a=$("#priorityHigh",s);break;case"urgent":a=$("#priorityUrgent",s);break;default:a=$("#priorityNormal",s)}if(a.prop("checked",!0),u.handleSelective($('[data-plugin="jquery-selective"]',s),i.members),0===i.description.length?$(".description",s).addClass("is-empty"):$(".description-content",s).html(i.description),0!==i.subtasks.length){for(var o=i.subtasks.length,d=0;d<o;d++){var r=$(u.subtaskTpl(i.subtasks[d]));$(".subtasks-list",s).append(r)}$(".subtasks",s).toggleClass("is-show")}if(0!==i.attachments.length){for(var c=i.attachments.length,h=0;h<c;h++){var p=$(u.attachmentTpl(i.attachments[h]));$(".attachments-list",s).append(p)}$(".attachments",s).toggleClass("is-show")}if(0!==i.comments.length)for(var k=i.comments.length,m=0;m<k;m++){var b=$(u.commentTpl(i.comments[m].src,i.comments[m].user,i.comments[m].time,i.comments[m].content));$(".comments-history",s).append(b)}return s}},u={defaults:r,defaultsOptions:c,handleSelective:function(t,e){var a=function(){var t=this,e=[];return $.each(this._options.getOptions(this),function(a,s){$.each(t.options.local,function(t,a){a.id===$(s).val()&&e.push(a)})}),e},s=[{id:"uid_1",name:"Herman Beck",img:"../../../../global/portraits/1.jpg"},{id:"uid_2",name:"Mary Adams",img:"../../../../global/portraits/2.jpg"},{id:"uid_3",name:"Caleb Richards",img:"../../../../global/portraits/3.jpg"},{id:"uid_4",name:"June Lane",img:"../../../../global/portraits/4.jpg"},{id:"uid_5",name:"Edward Fletcher",img:"../../../../global/portraits/5.jpg"},{id:"uid_6",name:"Crystal Bates",img:"../../../../global/portraits/6.jpg"}];t.selective({namespace:"addMember",local:s,selected:e,buildFromHtml:!1,tpl:{optionValue:function(t){return t.id},frame:function(){return'<div class="'+this.namespace+'">\n            '+this.options.tpl.items.call(this)+'\n            <div class="'+this.namespace+'-trigger">\n            '+this.options.tpl.triggerButton.call(this)+'\n            <div class="'+this.namespace+'-trigger-dropdown">\n            '+this.options.tpl.list.call(this)+"\n            </div>\n            </div>\n            </div>"},triggerButton:function(){return'<div class="'+this.namespace+'-trigger-button"><i class="wb-plus"></i></div>'},listItem:function(t){return'<li class="'+this.namespace+'-list-item"><img class="avatar" src="'+t.img+'">'+t.name+"</li>"},item:function(t){return'<li class="'+this.namespace+'-item"><img class="avatar" src="'+t.img+'">\n            '+this.options.tpl.itemRemove.call(this)+"\n            </li>"},itemRemove:function(){return'<span class="'+this.namespace+'-remove"><i class="wb-minus-circle"></i></span>'},option:function(t){return'<option value="'+this.options.tpl.optionValue.call(this,t)+'">'+t.name+"</option>"}},onAfterItemAdd:function(){var t=this.$element.closest(".slidePanel").data("slidePanel").target,e=a.call(this),s=t.data("taskInfo");s.members=e,t.data("taskInfo",s);var n=t.find(".task-members");new v(n,e)},onAfterItemRemove:function(){var t=this.$element.closest(".slidePanel").data("slidePanel").target,e=a.call(this),s=t.data("taskInfo");s.members=e,t.data("taskInfo",s);var n=t.find(".task-members");new v(n,e)}})},subtaskTpl:function(t){var e=t.complete?'checked="checked"':"";return'\n            <li class="list-group-item subtask">\n              <div class="checkbox-custom checkbox-primary">\n                <input type="checkbox" '+e+' name="checkbox">\n                <label class="title">'+t.title+'</label>\n              </div>\n              <div class="subtask-editor">\n                <form>\n                  <div class="form-group">\n                    <input class="form-control subtask-title" type="text" name="title">\n                  </div>\n                  <div class="form-group">\n                    <button class="btn btn-primary subtask-editor-save" type="button">Save</button>\n                    <a class="btn btn-sm btn-white subtask-editor-delete" href="javascript:void(0)">Delete</a>\n                  </div>\n                </form>\n              </div>\n            </li>\n           '},attachmentTpl:function(t){return'\n            <li class="list-group-item">\n              <div class="meida">\n                <div class="media-left">\n                  <div class="attachments-image">\n                    <img src="'+t.src+'">\n                  </div>\n                </div>\n                <div class="media-body">\n                  <p><span class="name">'+t.title+'</span><span</p>\n                  <p>\n                    <span class="size">'+t.size+'</span>\n                    <span class="attachments-actions">\n                      <button class="btn btn-icon btn-pure" type="button">\n                        <i class="icon wb-download" aria-hidden="true"></i>\n                      </button>\n                      <button class="btn btn-icon btn-pure" type="button">\n                         <i class="icon wb-trash" aria-hidden="true"></i>\n                      </button>\n                    </span>\n                  </p>\n                </div>\n              </div>\n            </li>\n           '},commentTpl:function(t,e,a,s){return'\n            <div class="comment media">\n              <div class="media-left">\n                <a class="avatar avatar-lg" href="javascript:void(0)">\n                  <img src="'+t+'" alt="...">\n                </a>\n              </div>\n              <div class="media-body">\n                <div class="comment-body">\n                  <a class="comment-author" href="javascript:void(0)">'+e+'</a>\n                  <div class="comment-meta">\n                    <span class="date">'+a+'</span>\n                  </div>\n                <div class="comment-content"><p>'+s+"</p></div>\n              </div>\n            </div>\n           "},handlePriority:function(){$(document).on("click",'[name="priorities"]',function(){var t=$(this),e=t.closest(".slidePanel").data("slidePanel").target,a=e.data("taskInfo");a.priority=t.data("priority"),e.data("taskInfo",a),e.removeClass("priority-normal priority-high priority-urgent").addClass("priority-"+e.data("taskInfo").priority)})},handleDeleteTask:function(){$(document).on("click",".taskboard-task-delete",function(){var t=$(this);bootbox.dialog({message:"Do you want to delete the task?",buttons:{success:{label:"Delete",className:"btn-danger",callback:function(){t.closest(".slidePanel").data("slidePanel").target.remove(),$(".slidePanel-close").trigger("click")}}}})})},handleEditor:function(){$(document).on("click",".slidePanel .task-title, .taskboard-task-edit, .description-toggle",function(){var t=$(this),e=t.closest(".slidePanel").data("slidePanel").target,a=e.data("taskInfo");$("#task-title").val(a.title),$("#task-description").val(a.description),t.closest(".slidePanel").find(".task-main").addClass("is-edit")}),$(document).on("click",".task-main-editor-save",function(){var t=$(this),e=t.closest(".slidePanel").data("slidePanel").target,a=e.data("taskInfo");a.title=$("#task-title").val(),a.description=$("#task-description").val(),e.data("taskInfo",a),$(".task-title",e).html(e.data("taskInfo").title),$(".slidePanel .task-title").html(e.data("taskInfo").title),$(".slidePanel .description-content").html(e.data("taskInfo").description),t.closest(".slidePanel").find(".task-main").removeClass("is-edit"),0===$("#task-description").val().length?$(".description").addClass("is-empty"):$(".description").removeClass("is-empty")}),$(document).on("click",".task-main-editor-cancel",function(){$(this).closest(".slidePanel").find(".task-main").removeClass("is-edit")})},handleSubtasks:function(){var t=this;$(document).on("click",".subtask-toggle",function(){var t=$(".subtask").length,e=$(".subtasks-add .subtask-title"),a=$(".subtasks");e.val(""),0===t&&a.addClass("is-show"),a.addClass("is-edit"),e.focus(),$(document).on("click.subtask-add",function(t){var e=$(t.target);0===e.closest($(".subtasks-add")).length&&(a.removeClass("is-edit"),$(document).off("click.subtask-add"))})}),$(document).on("click",".subtask-add-save",function(){var e=$(".subtasks-add .subtask-title"),a=$(".subtasks"),s=$(this).closest(".slidePanel").data("slidePanel").target,n=$(".subtask").length,i=s.data("taskInfo"),l=e.val();if(0===l.length)0===n&&a.removeClass("is-show");else{var o={title:l,complete:!1},d=$(t.subtaskTpl(o));$(".subtasks-list").append(d),i.subtasks[n]=o,s.data("taskInfo",i);var r=s.find(".task-badges");new p(r,s.data("taskInfo"))}e.val("").focus()}),$(document).on("click",".subtask-add-cancel",function(){$(".subtasks").removeClass("is-edit"),$(document).off("click.subtask-add")}),$(document).on("click",".subtask input",function(){var t=$(this),e=t.closest(".subtask"),a=t.closest(".slidePanel").data("slidePanel").target,s=e.index(),n=a.data("taskInfo");n.subtasks[s].complete=t.prop("checked"),a.data("taskInfo",n);var i=a.find(".task-badges");new p(i,a.data("taskInfo"))}),$(document).on("click",".subtask .title",function(){var t=$(this),e=t.closest(".subtask"),a=t.closest(".slidePanel").data("slidePanel").target,s=a.data("taskInfo"),n=e.index(),i=$(".subtask-title",e);e.addClass("is-edit"),i.val("").focus().val(s.subtasks[n].title),$(document).on("click.subtask",function(t){var a=$(t.target);0===a.closest(e).length&&(e.removeClass("is-edit"),$(document).off("click.subtask"))})}),$(document).on("click",".subtask-editor-save",function(){var t=$(this),e=t.closest(".subtask"),a=t.closest(".slidePanel").data("slidePanel").target,s=(a.data("taskInfo"),e.index()),n=a.data("taskInfo");n.subtasks[s].title=$(".subtask-title",e).val(),a.data("taskInfo",n),$(".title",$(".subtasks-list .subtask")[s]).html($(".subtask-title",e).val()),e.removeClass("is-edit"),$(document).off("click.subtask")}),$(document).on("click",".subtask-editor-delete",function(t){var e=$(this);bootbox.dialog({message:"Do you want to delete the subtask?",buttons:{success:{label:"Delete",className:"btn-danger",callback:function(){var t=e.closest(".subtask"),a=e.closest(".slidePanel").data("slidePanel").target,s=(a.data("taskInfo"),t.index()),n=a.data("taskInfo");n.subtasks.splice(s,1),a.data("taskInfo",n);var i=a.find(".task-badges");new p(i,a.data("taskInfo"));t.remove(),$(document).off("click.subtask"),0===$(".subtask").length&&$(".subtasks").removeClass("is-show")}}}})})},handleDatepicker:function(){$(document).on("click",".due-date-save",function(){var t=$(this),e=t.closest(".slidePanel").data("slidePanel").target,a=e.data("taskInfo"),s=$("#taskDatepickerInput").val();if(s.length>0){a.duedate=s,e.data("taskInfo",a);var n=e.find(".task-badges");new p(n,e.data("taskInfo"))}}),$(document).on("click",".due-date-delete",function(){var t=$(this),e=t.closest(".slidePanel").data("slidePanel").target,a=e.data("taskInfo");if(0!==a.duedate.length){a.duedate="",e.data("taskInfo",a);var s=e.find(".task-badges");new p(s,e.data("taskInfo"));$("#taskDatepicker").datepicker("clearDates")}})},handleAttachment:function(){$(document).on("click","#fileuploadToggle",function(){$("#fileupload").trigger("click")})},show:function(t,e){$.slidePanel.show(t,e)}},h=function(){function t(e){babelHelpers.classCallCheck(this,t),this.$el=null,this.data=e,this.$taskBages=null,this.$taskMembers=null,this.badgeList=null,this.memberList=null,this.render(this.once)}return babelHelpers.createClass(t,[{key:"render",value:function(){this.$el=$(this.getTpl(this.data)),this.$taskBages=this.$el.find(".task-badges"),this.badgeList=new p(this.$taskBages,this.data),this.data.members.length>0&&(this.$taskMembers=this.$el.find(".task-members"),this.memberList=new v(this.$taskMembers,this.data.members))}},{key:"getTpl",value:function(t){var e=t.complete?'checked="checked"':"";return'\n            <li class="list-group-item priority-'+t.priority+'" data-taskboard="slidePanel" data-url="panel.tpl">\n              <div class="checkbox-custom checkbox-primary">\n                <input type="checkbox" '+e+' name="checkbox">\n                <label class="task-title">'+t.title+'</label>\n              </div>\n              <div class="task-badges"></div>\n              <ul class="task-members">\n                <li><img class="avatar avatar-sm" src="../../../../global/portraits/5.jpg"></li>\n              </ul>\n            </li>\n           '}}]),t}(),p=function(){function t(e,a){babelHelpers.classCallCheck(this,t),this.$el=e,this.data=a,this.render()}return babelHelpers.createClass(t,[{key:"add",value:function(t){this.$el.append(t.$el)}},{key:"render",value:function(){var t={duedateData:this.data.duedate,subtasksData:this.data.subtasks,attachmentsData:this.data.attachments,commentsData:this.data.comments},e=t.duedateData,a=t.subtasksData,s=t.attachmentsData,n=t.commentsData;if(this.$el.children().remove(),e.length>0){var i=new k(e);this.add(i)}if(a.length>0){var l=new m(a);this.add(l)}if(s.length>0){var o=new b(s);this.add(o)}if(n.length>0){var d=new f(n);this.add(d)}}}]),t}(),k=function(){function t(e){babelHelpers.classCallCheck(this,t),this.data=e,this.$el=null,this.render()}return babelHelpers.createClass(t,[{key:"render",value:function(){this.$el=$(this.getTpl(this.data.split(/\//,2).join("/")))}},{key:"getTpl",value:function(t){return'<span class="task-badge task-badge-subtask icon wb-calendar">'+t+"</span>"}}]),t}(),m=function(){function t(e){babelHelpers.classCallCheck(this,t),this.data=e,this.$el=null,this.render()}return babelHelpers.createClass(t,[{key:"render",value:function(){var t=this.data.length;if(t>0){for(var e=0,a=0;a<t;a++)this.data[a].complete&&e++;this.$el=$(this.getTpl(e+"/"+t))}}},{key:"getTpl",value:function(t){return'<span class="task-badge task-badge-subtask icon wb-list-bulleted">'+t+"</span>"}}]),t}(),b=function(){function t(e){babelHelpers.classCallCheck(this,t),this.data=e,this.$el=null,this.render()}return babelHelpers.createClass(t,[{key:"render",value:function(){var t=this.data.length;t>0&&(this.$el=$(this.getTpl(this.data.length)))}},{key:"getTpl",value:function(t){return'<span class="task-badge task-badge-attachments icon wb-paperclip">'+t+"</span>"}}]),t}(),f=function(){function t(e){babelHelpers.classCallCheck(this,t),this.data=e,this.$el=null,this.render()}return babelHelpers.createClass(t,[{key:"render",value:function(){var t=this.data.length;t>0&&(this.$el=$(this.getTpl(this.data.length)))}},{key:"getTpl",value:function(t){return'<span class="task-badge task-badge-comments icon wb-chat">'+t+"</span>"}}]),t}(),v=function(){function t(e,a){babelHelpers.classCallCheck(this,t),this.$el=e,this.data=a,this.render()}return babelHelpers.createClass(t,[{key:"createMember",value:function(t){return new g(t)}},{key:"add",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t instanceof g)this.$el.append(t.$el);else{var e=this.createMember(t);this.add(e)}}},{key:"render",value:function(){if(this.$el.children().remove(),0!==this.data.length)for(var t=this.data.length,e=0;e<t;e++)this.add(this.data[e])}}]),t}(),g=function(){function t(e){babelHelpers.classCallCheck(this,t),this.data=e,this.$el=null,this.render()}return babelHelpers.createClass(t,[{key:"render",value:function(){this.$el=$(this.getTpl(this.data.img))}},{key:"getTpl",value:function(t){return'<li><img class="avatar avatar-sm" src="'+t+'"></li>'}}]),t}(),y=function(t){function e(){return babelHelpers.classCallCheck(this,e),babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"processed",value:function(){babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"processed",this).call(this),this.$taskboard=$("#taskboardStages"),this.stageList=null,this.init(),this.$floatBtn=$(".site-floataction"),this.$model=$("#addStageFrom"),this.$stageCreateBtn=this.$model.find("#taskboardStageCreat"),this.bindFloatBtn(),this.bindStageCreateBtn(),this.handleSlidePandelAction()}},{key:"init",value:function(){var t=this,e=Config.get("assets");$.getJSON(e+"/data/taskboard.json",function(e){t.stageList=new l(t.$taskboard,e)})}},{key:"bindFloatBtn",value:function(){var t=this;this.$floatBtn.on("click",function(){$("input",t.$model).val(""),$("option:first",$("select",t.$model)).prop("selected","selected")})}},{key:"bindStageCreateBtn",value:function(){var t=this;this.$stageCreateBtn.on("click",function(){var e=$('[name="name"]',t.$model),a={title:e.val(),tasks:[]};t.stageList.add(a)})}},{key:"handleSlidePandelAction",value:function(){u.handlePriority(),u.handleSubtasks(),u.handleDatepicker(),u.handleEditor(),u.handleDeleteTask(),u.handleAttachment()}}]),e}(n.default),w=null;t.default=y,t.AppTaskboard=y,t.run=s,t.getInstance=a});